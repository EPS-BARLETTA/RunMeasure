
<!doctype html>
<html lang="fr">
<head>
  <meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Multi</title>
  <link rel="stylesheet" href="styles.css">
  <script src="https://cdn.jsdelivr.net/npm/qrcodejs@1.0.0/qrcode.min.js"></script>
</head>
<body>
<header>
  <h1>ðŸ‘¥ Multi (jusquâ€™Ã  4)</h1>
  <div class="header-right"><a class="btn" href="menu.html">Modes</a><a class="btn" href="aide.html">Aide</a></div>
</header>
<main class="container">
  <section id="wrap" class="panel grid two"></section>
  <section class="panel center"><button id="stopAll" class="btn btn-lg">Stop gÃ©nÃ©ral + QR</button></section>
  <section id="qr" class="panel qr hidden"><h2>QR compatible ScanProf</h2><div id="qrBox" class="qr-box"></div></section>
</main>
<div class="footer">ChronoVitesse â€” Ã‰quipe EPS LycÃ©e Vauban â€” LUXEMBOURG â€” JB</div>
<script src="common.js"></script>
<script>
function card(i){
  const div=document.createElement('div');
  div.className='panel';
  div.innerHTML=`<h2>Ã‰lÃ¨ve nÂ°${i}</h2>
  <div class="grid two"><label>Nom <input class="nom"></label><label>PrÃ©nom <input class="prenom"></label><label>Classe <input class="classe"></label></div>
  <div class="center"><div class="timer timer-min t">00:00.0</div></div>
  <div class="action-bar"><button class="btn btn-start s">DÃ©marrer</button><button class="btn btn-stop p" disabled>Stop</button><button class="btn btn-reset r" disabled>Reset</button></div>`;
  let t0=null,tick=null;
  div.querySelector('.s').onclick=()=>{ t0=Date.now(); tick=setInterval(()=> div.querySelector('.t').textContent=formatMs(Date.now()-t0), 100); div.querySelector('.s').disabled=true; div.querySelector('.p').disabled=false; div.querySelector('.r').disabled=true; };
  div.querySelector('.p').onclick=()=>{ clearInterval(tick); div.querySelector('.p').disabled=true; div.querySelector('.r').disabled=false; };
  div.querySelector('.r').onclick=()=>{ clearInterval(tick); div.querySelector('.t').textContent='00:00.0'; div.querySelector('.s').disabled=false; div.querySelector('.p').disabled=true; div.querySelector('.r').disabled=true; };
  div._getRes=()=>{ const duree_s=Math.round((Date.now()-(t0||Date.now()))/1000); return { nom:div.querySelector('.nom').value.trim(), prenom:div.querySelector('.prenom').value.trim(), classe:div.querySelector('.classe').value.trim(), sexe:'', distance_m:0, duree_s, vma_kmh:0 } };
  return div;
}
const wrap=document.getElementById('wrap'); const cards=[card(1),card(2),card(3),card(4)]; cards.forEach(c=>wrap.appendChild(c));
stopAll.onclick=()=>{ showQR(cards.map(c=>c._getRes())); };
</script>
</body>
</html>
