<!doctype html>
<html lang="fr">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>RunMeasure ‚Ä¢ Options</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <div class="wrap">
    <header>
      <h1>RunMeasure</h1>
      <nav>
        <a class="btn" href="index.html">‚Üê Accueil</a>
        <a class="btn" href="aide.html">Aide</a>
      </nav>
    </header>

    <section class="card">
      <h2>Informations √©l√®ve</h2>
      <div class="row">
        <div>
          <label for="nom">Nom</label>
          <input id="nom" type="text" autocomplete="family-name" placeholder="Martin">
        </div>
        <div>
          <label for="prenom">Pr√©nom</label>
          <input id="prenom" type="text" autocomplete="given-name" placeholder="Julie">
        </div>
      </div>
      <div class="row">
        <div>
          <label for="classe">Classe</label>
          <input id="classe" type="text" placeholder="2nde 4">
        </div>
        <div>
          <label for="sexe">Sexe</label>
          <select id="sexe">
            <option value="">‚Äî</option>
            <option value="fille">Fille</option>
            <option value="garcon">Gar√ßon</option>
            <option value="autre">Autre</option>
          </select>
        </div>
      </div>
      <p class="muted">Ces infos sont m√©moris√©es pour le QR JSON.</p>
      <button id="save-eleve" class="btn">üíæ Enregistrer l‚Äô√©l√®ve</button>
    </section>

    <section class="card">
      <h2>Choisir un mode</h2>
      <div class="grid">
        <a class="btn btn-primary btn-wide go" data-mode="intermediaire">Temps interm√©diaire</a>
        <a class="btn btn-wide go" data-mode="chrono">Chrono</a>
        <a class="btn btn-wide go" data-mode="minuteur">Minuteur</a>
        <a class="btn btn-wide go" data-mode="chrono_vitesse">Chrono avec calcul de vitesse</a>
        <a class="btn btn-wide go" data-mode="minuteur_distance">Minuteur avec distance</a>
      </div>
    </section>

    <section class="card">
      <h2>Tests d‚Äôendurance</h2>
      <div class="grid">
        <a class="btn btn-primary btn-wide go" data-mode="demi_cooper">Demi-Cooper (6‚Ä≤)</a>
        <a class="btn btn-primary btn-wide go" data-mode="cooper">Cooper (12‚Ä≤)</a>
      </div>
    </section>

    <footer class="muted">
      RunMeasure ‚Äî ZIP
    </footer>
  </div>

  <script>
    function getEleve() {
      try { const raw = localStorage.getItem('eleve'); if (raw) return JSON.parse(raw); } catch {}
      return { nom:"", prenom:"", classe:"", sexe:"" };
    }
    function setEleve(e) { try { localStorage.setItem('eleve', JSON.stringify(e)); } catch {} }
    function loadForm() {
      const e = getEleve();
      if (!e) return;
      if (e.nom) document.getElementById('nom').value = e.nom;
      if (e.prenom) document.getElementById('prenom').value = e.prenom;
      if (e.classe) document.getElementById('classe').value = e.classe;
      if (e.sexe) document.getElementById('sexe').value = e.sexe;
    }
    function readForm() {
      return {
        nom: document.getElementById('nom').value.trim(),
        prenom: document.getElementById('prenom').value.trim(),
        classe: document.getElementById('classe').value.trim(),
        sexe: document.getElementById('sexe').value.trim().toLowerCase()
      };
    }
    document.addEventListener('DOMContentLoaded', () => {
      loadForm();
      document.getElementById('save-eleve').addEventListener('click', () => {
        setEleve(readForm());
        alert('√âl√®ve enregistr√© ‚úÖ');
      });
      document.querySelectorAll('a.go').forEach(a => {
        a.addEventListener('click', (ev) => {
          ev.preventDefault();
          setEleve(readForm());
          const mode = a.getAttribute('data-mode');
          window.location.href = `mode.html?mode=${encodeURIComponent(mode)}`;
        });
      });
    });
  </script>
</body>
</html>
