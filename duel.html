
<!doctype html>
<html lang="fr">
<head>
  <meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Duel</title>
  <link rel="stylesheet" href="styles.css">
  <script src="https://cdn.jsdelivr.net/npm/qrcodejs@1.0.0/qrcode.min.js"></script>
</head>
<body>
<header><h1>⚔️ Duel</h1><a class="btn" href="menu.html">⬅️ Modes</a></header>
<main class="container">
  <section class="panel grid two">
    <div class="panel" id="A">
      <h2>Élève A</h2>
      <div class="grid two">
        <label>Nom <input class="nom"></label><label>Prénom <input class="prenom"></label><label>Classe <input class="classe"></label>
      </div>
      <div class="center"><div class="timer timer-min t">00:00.0</div></div>
      <div class="action-bar"><button class="btn btn-start s">Démarrer</button><button class="btn btn-stop p" disabled>Stop</button><button class="btn btn-reset r" disabled>Reset</button></div>
    </div>
    <div class="panel" id="B">
      <h2>Élève B</h2>
      <div class="grid two">
        <label>Nom <input class="nom"></label><label>Prénom <input class="prenom"></label><label>Classe <input class="classe"></label>
      </div>
      <div class="center"><div class="timer timer-min t">00:00.0</div></div>
      <div class="action-bar"><button class="btn btn-start s">Démarrer</button><button class="btn btn-stop p" disabled>Stop</button><button class="btn btn-reset r" disabled>Reset</button></div>
    </div>
  </section>
  <section class="panel center"><button id="stopAll" class="btn btn-lg">Stop général + QR</button></section>
  <section id="qr" class="panel qr hidden"><h2>QR compatible ScanProf</h2><div id="qrBox" class="qr-box"></div></section>
</main>
<div class="footer">ChronoVitesse — Équipe EPS Lycée Vauban — LUX — JB</div>
<script src="common.js"></script>
<script>
function attach(id){
  const el=document.getElementById(id);
  let t0=null,tick=null;
  el.querySelector('.s').onclick=()=>{ t0=Date.now(); tick=setInterval(()=> el.querySelector('.t').textContent=formatMs(Date.now()-t0), 100); el.querySelector('.s').disabled=true; el.querySelector('.p').disabled=false; el.querySelector('.r').disabled=true; };
  el.querySelector('.p').onclick=()=>{ clearInterval(tick); el.querySelector('.p').disabled=true; el.querySelector('.r').disabled=false; };
  el.querySelector('.r').onclick=()=>{ clearInterval(tick); el.querySelector('.t').textContent='00:00.0'; el.querySelector('.s').disabled=false; el.querySelector('.p').disabled=true; el.querySelector('.r').disabled=true; };
  el._getRes=()=>{
    const duree_s=Math.round((Date.now()-(t0||Date.now()))/1000);
    return { nom:el.querySelector('.nom').value.trim(), prenom:el.querySelector('.prenom').value.trim(), classe:el.querySelector('.classe').value.trim(), sexe:'', distance_m:0, duree_s, vma_kmh:0 };
  };
  return el;
}
const A=attach('A'), B=attach('B');
stopAll.onclick=()=>{ showQR([ A._getRes(), B._getRes() ]); };
</script>
</body>
</html>
